<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:16,&quot;tests&quot;:160,&quot;passes&quot;:160,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2020-05-04T12:38:34.633Z&quot;,&quot;end&quot;:&quot;2020-05-04T12:38:40.368Z&quot;,&quot;duration&quot;:5735,&quot;testsRegistered&quot;:160,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;4bc8aec7-fbb0-41dd-957e-5451724399a7&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1098,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdf4c9b4-4ae9-49f0-9e28-80e8740ea7bf&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0561d190-15b7-40d4-899e-83758579a115&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dccf720f-0f60-40f3-b7c5-d6c8af63d50f&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;623178a8-0469-4c66-a72d-1b70f7aacde7&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7d2f81c-4b02-4b1b-8b76-0315c37caaf9&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b36110a-7c68-43e5-ae7f-592ee2798bf4&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33a30a4c-7ff6-4d43-a991-91a09e121f09&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00b87853-b005-4c6b-b064-15c3b8e264e9&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d9ac27d-b2c4-4c72-b122-1f6a835af1f0&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da9f1131-f13f-4d77-be81-8e18e675a6ae&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29c957c8-e530-4671-90da-616dad636de4&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;420ba93e-226b-437c-a256-5eb0c36d8518&quot;,&quot;parentUUID&quot;:&quot;434c1abf-2b5c-4c8b-9a51-0094b2199392&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dccf720f-0f60-40f3-b7c5-d6c8af63d50f&quot;,&quot;623178a8-0469-4c66-a72d-1b70f7aacde7&quot;,&quot;a7d2f81c-4b02-4b1b-8b76-0315c37caaf9&quot;,&quot;2b36110a-7c68-43e5-ae7f-592ee2798bf4&quot;,&quot;33a30a4c-7ff6-4d43-a991-91a09e121f09&quot;,&quot;00b87853-b005-4c6b-b064-15c3b8e264e9&quot;,&quot;4d9ac27d-b2c4-4c72-b122-1f6a835af1f0&quot;,&quot;da9f1131-f13f-4d77-be81-8e18e675a6ae&quot;,&quot;29c957c8-e530-4671-90da-616dad636de4&quot;,&quot;420ba93e-226b-437c-a256-5eb0c36d8518&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:252,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7390832d-dac9-4e01-a642-4f8b1528ad16&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed816726-3e6f-420d-93f4-14d39333df73&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b2c5f7a-b330-40d3-b9a5-ba11b4b43fad&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72e3171d-5841-4462-85be-637efb4fefc8&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc67444d-0af7-4d28-addb-2a622e06f346&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c7a7ec2-bcc3-4e74-9e93-81e3519cbd71&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2e88051-9262-44d9-a3bc-db1f595aa593&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab435a94-a81e-47c6-b45d-dd9c625daebf&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c36a3c0-24a0-4d36-860c-57ee2022dce2&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;322353dc-0c53-4bbb-af67-6dbee0192c84&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36ecd863-e58f-4a67-bccf-b84448857dba&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52eb22f2-b047-4ba1-aeff-664989d4bffd&quot;,&quot;parentUUID&quot;:&quot;397303f8-76f7-4102-8475-34181ed5996b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b2c5f7a-b330-40d3-b9a5-ba11b4b43fad&quot;,&quot;72e3171d-5841-4462-85be-637efb4fefc8&quot;,&quot;dc67444d-0af7-4d28-addb-2a622e06f346&quot;,&quot;5c7a7ec2-bcc3-4e74-9e93-81e3519cbd71&quot;,&quot;f2e88051-9262-44d9-a3bc-db1f595aa593&quot;,&quot;ab435a94-a81e-47c6-b45d-dd9c625daebf&quot;,&quot;8c36a3c0-24a0-4d36-860c-57ee2022dce2&quot;,&quot;322353dc-0c53-4bbb-af67-6dbee0192c84&quot;,&quot;36ecd863-e58f-4a67-bccf-b84448857dba&quot;,&quot;52eb22f2-b047-4ba1-aeff-664989d4bffd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:245,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be6d20a2-aa10-4b70-9873-ae5cf637e2cd&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3571eb15-3ab1-4918-810d-7aa809cdbdc5&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fb36b55-ad1c-4604-8b0d-5111ce191dcf&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2974ade9-c413-4e25-b93d-c8dcbbbe7bbf&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f41764cd-b8f4-4e55-a1e5-b0995816c6ec&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8138ecdf-1493-4ed6-8cdf-e27e1b9ed46e&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6500637-68a3-4522-8f13-7ea21b5c0341&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0300511-c4b8-4d5e-8a95-a98a4938c0af&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;409e05a1-5c5a-49ec-8f5e-98fe0edfeae6&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45fa129e-d213-4a58-b366-89febd11300a&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ce881f8-0f43-40c8-a7ae-ae671ce0e95d&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6f75e17-40d1-4758-b6a1-f0c63cb6c3d5&quot;,&quot;parentUUID&quot;:&quot;88b5d99f-d4c9-4ab0-bad3-d8613a31dd7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fb36b55-ad1c-4604-8b0d-5111ce191dcf&quot;,&quot;2974ade9-c413-4e25-b93d-c8dcbbbe7bbf&quot;,&quot;f41764cd-b8f4-4e55-a1e5-b0995816c6ec&quot;,&quot;8138ecdf-1493-4ed6-8cdf-e27e1b9ed46e&quot;,&quot;c6500637-68a3-4522-8f13-7ea21b5c0341&quot;,&quot;c0300511-c4b8-4d5e-8a95-a98a4938c0af&quot;,&quot;409e05a1-5c5a-49ec-8f5e-98fe0edfeae6&quot;,&quot;45fa129e-d213-4a58-b366-89febd11300a&quot;,&quot;1ce881f8-0f43-40c8-a7ae-ae671ce0e95d&quot;,&quot;d6f75e17-40d1-4758-b6a1-f0c63cb6c3d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:247,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7738285a-6adc-40dc-ae66-a10f37dececc&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22beda65-b899-468e-a6f7-409e2538afdb&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6da40b61-2143-4d03-9d65-ceff42ef1fc8&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbd08b6f-87af-4f3f-9e4c-39216b17b176&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b11040bb-063a-41c7-b540-920f2f1ef9a9&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;468ba102-66b3-4f55-ad27-d35a7da8fc3f&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6632fd68-3674-405e-b9df-1d6225b10450&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78cda073-0e1d-4b77-b2bc-95ddbac8fb30&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3fe71cf-de8d-4936-9e39-90ec1dfd839b&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bb8ffd8-ed41-4483-87c8-faebd946c1b4&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c7d88b8-ab00-42eb-8cb8-735c3f871c6e&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;098bea51-2b85-4ca4-811c-53a72c45e5cd&quot;,&quot;parentUUID&quot;:&quot;9736e6dc-6a85-4b79-b351-00945c9a7548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6da40b61-2143-4d03-9d65-ceff42ef1fc8&quot;,&quot;cbd08b6f-87af-4f3f-9e4c-39216b17b176&quot;,&quot;b11040bb-063a-41c7-b540-920f2f1ef9a9&quot;,&quot;468ba102-66b3-4f55-ad27-d35a7da8fc3f&quot;,&quot;6632fd68-3674-405e-b9df-1d6225b10450&quot;,&quot;78cda073-0e1d-4b77-b2bc-95ddbac8fb30&quot;,&quot;f3fe71cf-de8d-4936-9e39-90ec1dfd839b&quot;,&quot;7bb8ffd8-ed41-4483-87c8-faebd946c1b4&quot;,&quot;9c7d88b8-ab00-42eb-8cb8-735c3f871c6e&quot;,&quot;098bea51-2b85-4ca4-811c-53a72c45e5cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa3dffda-7bdd-4f01-b99e-29d5fee06a75&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f2fe9c7-41fc-413f-a1b7-71407a9b6e82&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81deae9b-3b03-4a53-b027-be4f58a603f0&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52f36b4f-1c8c-4ddc-a39b-2f93337122a2&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7f9e4db-ae26-414b-be70-51d55c29aaf4&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9501788b-c88b-493b-b06a-a3f6c1ef7f18&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0498e8ff-453f-4e3a-8aaa-e83a170f7209&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7260898b-fdc6-461d-9145-ab11e267a975&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cabe143-cbdb-4073-b111-7d53b047c0cf&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b2f32cc-cc33-453b-8fbc-77a8ff796e76&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e14a74e5-88c0-473b-b09f-bac9cb59e9ad&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71b8cd28-c9c6-4d0d-9c86-3e0e64b479b8&quot;,&quot;parentUUID&quot;:&quot;0ba7d480-6010-4b39-a310-e05aa91335d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81deae9b-3b03-4a53-b027-be4f58a603f0&quot;,&quot;52f36b4f-1c8c-4ddc-a39b-2f93337122a2&quot;,&quot;a7f9e4db-ae26-414b-be70-51d55c29aaf4&quot;,&quot;9501788b-c88b-493b-b06a-a3f6c1ef7f18&quot;,&quot;0498e8ff-453f-4e3a-8aaa-e83a170f7209&quot;,&quot;7260898b-fdc6-461d-9145-ab11e267a975&quot;,&quot;0cabe143-cbdb-4073-b111-7d53b047c0cf&quot;,&quot;5b2f32cc-cc33-453b-8fbc-77a8ff796e76&quot;,&quot;e14a74e5-88c0-473b-b09f-bac9cb59e9ad&quot;,&quot;71b8cd28-c9c6-4d0d-9c86-3e0e64b479b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:244,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64a68342-cca4-44f8-91f2-a489264e2221&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05b23d56-e44d-41ba-9eed-ac69ff242a2d&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09c03bed-ff19-4d44-8b48-aa0d59352008&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da861caf-8c6d-49aa-a4dd-de52571195c1&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f80f16a3-b2f7-4735-94fe-8a5dea403dde&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1e080b5-62bd-4fed-976b-17a2dbae4021&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce96cb34-a73c-401b-8c2e-2e6275eb1003&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a168ca4c-f935-4481-8260-11b9fb7094d2&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d8896a2-7b16-48bf-bc9e-e663fe7804e0&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ee4501b-ef2f-49af-a65a-b1b0e0e9f06d&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9315107f-79ca-4b2f-a727-f658b2fe5210&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f24a410-a0a6-436e-89cc-90aa58e00acc&quot;,&quot;parentUUID&quot;:&quot;7e7fc152-2f56-472c-a272-7359d8ec4a02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09c03bed-ff19-4d44-8b48-aa0d59352008&quot;,&quot;da861caf-8c6d-49aa-a4dd-de52571195c1&quot;,&quot;f80f16a3-b2f7-4735-94fe-8a5dea403dde&quot;,&quot;c1e080b5-62bd-4fed-976b-17a2dbae4021&quot;,&quot;ce96cb34-a73c-401b-8c2e-2e6275eb1003&quot;,&quot;a168ca4c-f935-4481-8260-11b9fb7094d2&quot;,&quot;9d8896a2-7b16-48bf-bc9e-e663fe7804e0&quot;,&quot;6ee4501b-ef2f-49af-a65a-b1b0e0e9f06d&quot;,&quot;9315107f-79ca-4b2f-a727-f658b2fe5210&quot;,&quot;6f24a410-a0a6-436e-89cc-90aa58e00acc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:248,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9b38ce4-6d50-463e-a040-998d42ffa889&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19d74ce2-3595-43d4-b458-99e383911fdf&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7273fbc2-c009-42f2-a7b1-685a3b022deb&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;145610eb-f230-4baf-b97d-ca0098e135f5&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2bc28a1-0b5c-46ac-b97f-08ed63643b7a&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e92dfd73-8dd2-486c-8204-9ba5aee375ab&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2869bd8e-ad2d-4856-af9a-500110d3a9db&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e587f547-c93c-4e2a-9edb-a29f8e8abf7e&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2679e74-ad1d-48a6-91b5-ee45c1cbfb3a&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48b815de-9726-4df8-a590-5d1f957f21db&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79fe9dc7-53eb-4173-a00a-1fd5ed82c2a2&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adaf5c97-e643-4aa5-a88c-36c0e3443672&quot;,&quot;parentUUID&quot;:&quot;405caca1-a62b-49a0-96cb-5546058960ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7273fbc2-c009-42f2-a7b1-685a3b022deb&quot;,&quot;145610eb-f230-4baf-b97d-ca0098e135f5&quot;,&quot;a2bc28a1-0b5c-46ac-b97f-08ed63643b7a&quot;,&quot;e92dfd73-8dd2-486c-8204-9ba5aee375ab&quot;,&quot;2869bd8e-ad2d-4856-af9a-500110d3a9db&quot;,&quot;e587f547-c93c-4e2a-9edb-a29f8e8abf7e&quot;,&quot;a2679e74-ad1d-48a6-91b5-ee45c1cbfb3a&quot;,&quot;48b815de-9726-4df8-a590-5d1f957f21db&quot;,&quot;79fe9dc7-53eb-4173-a00a-1fd5ed82c2a2&quot;,&quot;adaf5c97-e643-4aa5-a88c-36c0e3443672&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:244,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;464af852-7688-4578-9536-05402d54d719&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0dc352d-69be-4d6d-8903-0b0b075ffb93&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f86c3eb8-0b7f-4d1d-9178-4ebab4d358ce&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4d461ed-1057-4a0e-a3f0-e8b77377f3fc&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f5f46ec-791e-4827-a282-a12c48884900&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00ecdb0d-11ef-491a-8a82-2e719a77ee45&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2ec2dfb-08a7-4ea1-9b58-e2533d736613&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af028d7b-7c99-49e1-a4e4-98f5ed6aeaf3&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de32dd70-7028-4c37-80a3-31821157afc9&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28b8388c-4fac-42b6-b745-83875bdf3610&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a40111f5-425f-42eb-9b92-55370882b060&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3908c9f-a9b6-498a-9b06-692c55361ce0&quot;,&quot;parentUUID&quot;:&quot;683f3df2-787e-4739-af1a-ccbd4887b788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f86c3eb8-0b7f-4d1d-9178-4ebab4d358ce&quot;,&quot;b4d461ed-1057-4a0e-a3f0-e8b77377f3fc&quot;,&quot;8f5f46ec-791e-4827-a282-a12c48884900&quot;,&quot;00ecdb0d-11ef-491a-8a82-2e719a77ee45&quot;,&quot;d2ec2dfb-08a7-4ea1-9b58-e2533d736613&quot;,&quot;af028d7b-7c99-49e1-a4e4-98f5ed6aeaf3&quot;,&quot;de32dd70-7028-4c37-80a3-31821157afc9&quot;,&quot;28b8388c-4fac-42b6-b745-83875bdf3610&quot;,&quot;a40111f5-425f-42eb-9b92-55370882b060&quot;,&quot;a3908c9f-a9b6-498a-9b06-692c55361ce0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:244,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbdf59e5-e4ec-47d9-956a-a81188502388&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3e7c09c-1ef5-4375-b99c-b470933f1a59&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c723d824-e1f9-4fcb-8fc9-fc576fbadf38&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b0d2253-32ac-408c-85f2-497c7559cb77&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a35e24a-14b9-4416-9580-d72256f5456d&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43757453-1a76-4ace-8393-32ac25804fdf&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9eff5659-a452-4936-a926-8aa957c00bf5&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d262e54-52db-46f9-8c84-c394d2ff280e&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44966124-c48b-4814-97f7-9ecd9dba324a&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9727335-f143-473b-9562-5bb1680a37be&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd8219f9-9160-44c2-8576-421ebcd169b8&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e7c80ca-6cf2-40a8-9e76-c7370615538b&quot;,&quot;parentUUID&quot;:&quot;6d5cde26-0825-4c6c-b1c7-7a94a0702cab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c723d824-e1f9-4fcb-8fc9-fc576fbadf38&quot;,&quot;2b0d2253-32ac-408c-85f2-497c7559cb77&quot;,&quot;4a35e24a-14b9-4416-9580-d72256f5456d&quot;,&quot;43757453-1a76-4ace-8393-32ac25804fdf&quot;,&quot;9eff5659-a452-4936-a926-8aa957c00bf5&quot;,&quot;2d262e54-52db-46f9-8c84-c394d2ff280e&quot;,&quot;44966124-c48b-4814-97f7-9ecd9dba324a&quot;,&quot;b9727335-f143-473b-9562-5bb1680a37be&quot;,&quot;dd8219f9-9160-44c2-8576-421ebcd169b8&quot;,&quot;7e7c80ca-6cf2-40a8-9e76-c7370615538b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:247,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a635a92-1bf3-4b93-9ca5-f2d11894c54f&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b79f780a-37d8-48eb-8f05-122a4b524e6a&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd717c30-deb8-4eba-93ca-9b8f96ea4489&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7def9f5-8bf9-401c-8563-75a97a796291&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;853f379f-c713-40b8-88ba-32754f1b0ca3&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42d64090-a41b-496f-8c10-4c6f5c2ae49b&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb476a9e-a3d9-47ee-895e-c8ac3478e48f&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ba0f72d-80d8-4d3f-94ae-7ca881e21f37&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7d96d62-0cb9-4d39-a2e2-1a1d3660d736&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff910eba-81d9-442c-a1e3-a2b7516274a1&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;864d4c21-965d-4d6c-bfa3-9f6435ea8362&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06296c1d-7df0-4140-82fc-7288ebc1fa5b&quot;,&quot;parentUUID&quot;:&quot;6bab6b27-bdf8-48a0-8763-f8931ad06c6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd717c30-deb8-4eba-93ca-9b8f96ea4489&quot;,&quot;b7def9f5-8bf9-401c-8563-75a97a796291&quot;,&quot;853f379f-c713-40b8-88ba-32754f1b0ca3&quot;,&quot;42d64090-a41b-496f-8c10-4c6f5c2ae49b&quot;,&quot;eb476a9e-a3d9-47ee-895e-c8ac3478e48f&quot;,&quot;7ba0f72d-80d8-4d3f-94ae-7ca881e21f37&quot;,&quot;e7d96d62-0cb9-4d39-a2e2-1a1d3660d736&quot;,&quot;ff910eba-81d9-442c-a1e3-a2b7516274a1&quot;,&quot;864d4c21-965d-4d6c-bfa3-9f6435ea8362&quot;,&quot;06296c1d-7df0-4140-82fc-7288ebc1fa5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:249,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d9260de-9b22-4a6b-ab76-59135b8d9b82&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc1e77c0-10bf-43a7-9cd9-481ea103f37b&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b068e53b-1d66-40b9-ae35-860acc81c065&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94b5996a-ed4e-4e7f-91a1-e05047c8c29d&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab7f491d-a7ad-4073-82e6-c73620e26513&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd8b7c71-8ee0-45ea-a21b-589033b978e5&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cf0d030-2e55-44f2-9c93-ee8732c64b82&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9c0f5da-c686-4995-9c72-b16cb0d64da9&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e23cddd9-0b9a-4093-a015-23d10c2e9ae2&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0b52b17-e18b-4169-98a3-a84a51ed35f3&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abaf900e-c923-44c7-92c1-0b33050b78b2&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;069c69ee-a643-4e20-96a1-879989cfda0e&quot;,&quot;parentUUID&quot;:&quot;1a9f7711-d3b1-4da0-acaa-69d8265e8e74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b068e53b-1d66-40b9-ae35-860acc81c065&quot;,&quot;94b5996a-ed4e-4e7f-91a1-e05047c8c29d&quot;,&quot;ab7f491d-a7ad-4073-82e6-c73620e26513&quot;,&quot;cd8b7c71-8ee0-45ea-a21b-589033b978e5&quot;,&quot;0cf0d030-2e55-44f2-9c93-ee8732c64b82&quot;,&quot;a9c0f5da-c686-4995-9c72-b16cb0d64da9&quot;,&quot;e23cddd9-0b9a-4093-a015-23d10c2e9ae2&quot;,&quot;e0b52b17-e18b-4169-98a3-a84a51ed35f3&quot;,&quot;abaf900e-c923-44c7-92c1-0b33050b78b2&quot;,&quot;069c69ee-a643-4e20-96a1-879989cfda0e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:248,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc40704-fecb-4729-a9a7-58037a89f268&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cc31d04-a4a6-453a-847b-dcadd81efcad&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05b126cd-4ad5-49a2-bbc0-eccbd272a04e&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9edb0908-7d0c-4968-910c-9182eec9aeea&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f93773-66e3-4595-a01e-abaeaece7885&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5a7f394-68b0-489f-bc7c-e8194c4977dc&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab67ba91-79a2-4cb3-9459-fd5c774ea1e0&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bf323a4-179f-4bea-b478-b8a5b0f6ca06&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1177864-a7bf-4f83-b3fc-c4d5fb68959d&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;846eba89-729a-4d6c-802f-d8ce06a8fa2b&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2ba1bf6-06b7-4cc6-9504-26b4daa46bcb&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fc016ba-92d7-4bc9-bc90-ace1d1e75127&quot;,&quot;parentUUID&quot;:&quot;b9120ad6-73c4-4cd7-b5c7-504fdf763614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05b126cd-4ad5-49a2-bbc0-eccbd272a04e&quot;,&quot;9edb0908-7d0c-4968-910c-9182eec9aeea&quot;,&quot;64f93773-66e3-4595-a01e-abaeaece7885&quot;,&quot;e5a7f394-68b0-489f-bc7c-e8194c4977dc&quot;,&quot;ab67ba91-79a2-4cb3-9459-fd5c774ea1e0&quot;,&quot;7bf323a4-179f-4bea-b478-b8a5b0f6ca06&quot;,&quot;b1177864-a7bf-4f83-b3fc-c4d5fb68959d&quot;,&quot;846eba89-729a-4d6c-802f-d8ce06a8fa2b&quot;,&quot;e2ba1bf6-06b7-4cc6-9504-26b4daa46bcb&quot;,&quot;3fc016ba-92d7-4bc9-bc90-ace1d1e75127&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:243,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f61b3bc4-634b-4c38-8286-b9732f0d6b54&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d32d64ad-9cd4-4ee2-86b7-71e4b47fa44f&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bed17945-1e07-43cb-a6ae-28c52412e0bf&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3693975d-12cc-48cc-bb57-62d3be5c9b79&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fcfef63-9e8c-4da7-89e3-100eab1b30ae&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bf4b7cf-d9a6-4173-ba5e-9deba3901ce8&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7ce8b03-2433-4903-9f35-751a596eab0b&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7679813-e0ee-4a5a-b7d1-0e462ede2eca&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ff186da-6cb9-4a91-bd65-cf6cc8b45395&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5f7ebb1-7a9e-46de-a581-dc8f378fb46a&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1be79195-60aa-42a8-b932-6b327ed62d8d&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8974424b-8ad5-4615-a773-dfb6fbd5907f&quot;,&quot;parentUUID&quot;:&quot;bc9da1ec-0da4-4d08-83b2-846b0b2fcde8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bed17945-1e07-43cb-a6ae-28c52412e0bf&quot;,&quot;3693975d-12cc-48cc-bb57-62d3be5c9b79&quot;,&quot;7fcfef63-9e8c-4da7-89e3-100eab1b30ae&quot;,&quot;4bf4b7cf-d9a6-4173-ba5e-9deba3901ce8&quot;,&quot;e7ce8b03-2433-4903-9f35-751a596eab0b&quot;,&quot;f7679813-e0ee-4a5a-b7d1-0e462ede2eca&quot;,&quot;4ff186da-6cb9-4a91-bd65-cf6cc8b45395&quot;,&quot;b5f7ebb1-7a9e-46de-a581-dc8f378fb46a&quot;,&quot;1be79195-60aa-42a8-b932-6b327ed62d8d&quot;,&quot;8974424b-8ad5-4615-a773-dfb6fbd5907f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:248,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c335181-75b4-40f1-9a6c-9ef7f1403edc&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;deacae65-5d73-48bd-b813-add369fd49aa&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6123d8b4-4b8b-4144-9668-9bcc9ceb9a2d&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;351ca2cf-d3cb-475e-bd7f-fd3d0effbf5d&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df5c0d63-5a74-411a-b8a7-c4e89caf5f2d&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27c82a09-60e5-43ec-9300-47b61bd27d76&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;202dfd66-c1ab-42c1-a98d-cd7310098b0a&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b6b7877-2c84-46c0-9ba9-00fef3aef074&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1e3ebb6-819a-48d7-a854-a703986fa0de&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf786eec-6d5d-4e55-8e4f-73883fb220fb&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb95570a-a639-4b93-8472-1dd29e4853af&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c2f1240-61f5-4b34-a2a9-8acdb13765af&quot;,&quot;parentUUID&quot;:&quot;829a9cb4-e2fa-4b43-a383-a427237b3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6123d8b4-4b8b-4144-9668-9bcc9ceb9a2d&quot;,&quot;351ca2cf-d3cb-475e-bd7f-fd3d0effbf5d&quot;,&quot;df5c0d63-5a74-411a-b8a7-c4e89caf5f2d&quot;,&quot;27c82a09-60e5-43ec-9300-47b61bd27d76&quot;,&quot;202dfd66-c1ab-42c1-a98d-cd7310098b0a&quot;,&quot;6b6b7877-2c84-46c0-9ba9-00fef3aef074&quot;,&quot;a1e3ebb6-819a-48d7-a854-a703986fa0de&quot;,&quot;cf786eec-6d5d-4e55-8e4f-73883fb220fb&quot;,&quot;eb95570a-a639-4b93-8472-1dd29e4853af&quot;,&quot;7c2f1240-61f5-4b34-a2a9-8acdb13765af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:249,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf8fe7f2-65d7-40f2-b147-bed4b111ee68&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6eaff927-cd4d-428a-a593-c5f9b617fba8&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65021afa-b3f9-4434-a16e-f0e0dd44d959&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b805bf1-8440-4351-99cd-411243001132&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edf14d49-5378-4c72-9296-032b3f7407c8&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35469301-8975-493e-a0c0-79c3e72518a6&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;786c3f14-16a0-4155-937f-81deb5da8628&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e68a8eeb-55e0-4df1-b50e-28984f120835&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2babaa1f-3cfc-4d67-b221-c91f9cb8ab0a&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95b9fd3a-1db4-4ad6-9e1f-d6bcd90cb3ba&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f339c9c6-b7f4-4811-b51a-dda173010204&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bd86e4e-5326-4666-b318-3ab5eaebaea2&quot;,&quot;parentUUID&quot;:&quot;b72403fb-da2d-4836-8b50-ea12def16615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;65021afa-b3f9-4434-a16e-f0e0dd44d959&quot;,&quot;8b805bf1-8440-4351-99cd-411243001132&quot;,&quot;edf14d49-5378-4c72-9296-032b3f7407c8&quot;,&quot;35469301-8975-493e-a0c0-79c3e72518a6&quot;,&quot;786c3f14-16a0-4155-937f-81deb5da8628&quot;,&quot;e68a8eeb-55e0-4df1-b50e-28984f120835&quot;,&quot;2babaa1f-3cfc-4d67-b221-c91f9cb8ab0a&quot;,&quot;95b9fd3a-1db4-4ad6-9e1f-d6bcd90cb3ba&quot;,&quot;f339c9c6-b7f4-4811-b51a-dda173010204&quot;,&quot;8bd86e4e-5326-4666-b318-3ab5eaebaea2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;title&quot;:&quot;Test FSEW&quot;,&quot;fullFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/test/testFSEW.js&quot;,&quot;file&quot;:&quot;/test/testFSEW.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Spin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;before all\&quot; hook: Spin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1046,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (i &gt;= 15 &amp;&amp; nameAction == \&quot;spin\&quot;) {\n    try {\n        const res = await spinbeforFSEW();\n        const obj = res.context.freespins.count;\n        console.log(obj.rest);\n        let action = false;\n        nameAction = \&quot;freespin\&quot;;\n        data = {...data, ...obj, res, action };\n    } catch (error) {\n        let { code, message } = data.res.status;\n        console.log(code + \&quot;  code\&quot;);\n        console.log(message + \&quot;  message\&quot;);\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n} else {\n    try {\n        const res = await freespinEW();\n        expect(res.status.status).to.be.equal(200);\n        const obj = res.context.freespins.count;\n        const fsWin = res.context.freespins.win;\n        const matrix = res.context.matrix;\n        let funcResultExpW = chekExpendingWild(matrix);\n        const balance = res.user.balance;\n        const action = true;\n        nameAction = chekActionSpin(res);\n        const funcResult = checkWin1(res);\n        data = {...data, ...obj, res, matrix, balance, fsWin, action, funcResult, ...funcResultExpW };\n        if (funcResult !== null) {\n            let winLinesWithoutNull = funcResult.allWinLines.filter(winLines =&gt; winLines.id !== null);\n            console.log(funcResult.allWinLines);\n            console.log(winLinesWithoutNull);\n            if (funcResult.allWinLines[0].id == null &amp;&amp; funcResult.allWinLines[0].amount != 0) {\n                let isWinNull = true;\n                let winLinesNull = funcResult.allWinLines[0];\n                data = {...data, isWinNull, winLinesNull };\n            }\n            data = {...data, winLinesWithoutNull, ...funcResult };\n        }\n        const file = await fs.readFile(&#x27;db.json&#x27;, &#x27;utf8&#x27;);\n        const fileData = JSON.parse(file);\n        globalDate = {...fileData };\n    } catch (error) {\n        console.log(&#x27;!!!!!!ERROR in before block!!!!!! &#x27; + error);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ffcda52-63b0-422f-87e9-d07e9470aee8&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: wright&quot;,&quot;fullTitle&quot;:&quot;Test FSEW \&quot;after all\&quot; hook: wright&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { rest, res } = data;\nif (rest &gt; 0) {\n    let oldRest = res.context.freespins.count.rest;\n    let oldTotal = res.context.freespins.count.total;\n    let oldFsWin = res.context.freespins.win;\n    let oldBalance = res.user.balance;\n    globalDate = {...globalDate, oldRest, oldTotal, oldFsWin, oldBalance };\n    await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n    // } else {\n    //     let oldRest = \&quot;15\&quot;;\n    //     let oldTotal = \&quot;15\&quot;;\n    //     let oldFsWin = res.context.freespins.win;\n    //     let oldBalance = res.user.balance;\n    //     globalDate = { oldRest, oldTotal, oldFsWin, oldBalance };\n    //     await fs.writeFile(&#x27;db.json&#x27;, JSON.stringify(globalDate));\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc6bc8cd-3cdb-4f99-a55f-37a36cbf4d22&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;check correct add count of FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add count of FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    let { matrix, add, total, oldTotal } = data;\n    const arrScatter = [];\n    matrix.forEach((el) =&gt; {\n        let getScatter = el.filter(value =&gt; value == 1);\n        if (getScatter.length &gt; 0) {\n            arrScatter.push(...getScatter);\n        }\n    });\n    if (arrScatter.length &gt; 2) {\n        oldTotal = total + 15;\n        add = 15;\n        data = {...data, add, oldTotal };\n        i = i + 15;\n        console.log(add + \&quot; add \&quot;);\n        expect(add).to.be.equal(15);\n    } else {\n        console.log(add + \&quot; add\&quot;);\n        expect(add).to.equal(+0);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5055927-5d48-4208-85d3-e44ccb2b6fc4&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct total FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct total FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, add, total, action } = data;\nif (action == true) {\n    const { oldTotal } = globalDate;\n    if (add == 15) {\n        console.log(oldTotal + add + \&quot; oldTotal FS + rest Fs  \&quot; + total + \&quot; total FS\&quot;);\n        expect(oldTotal + add).to.equal(total);\n    } else {\n        console.log(oldTotal + \&quot; oldTotal FS  \&quot; + total + \&quot; total FS\&quot;);\n        expect(+oldTotal).to.equal(+total);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4c3f83a-450c-4a23-9cdf-1f709d22675b&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check rest FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check rest FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { add, rest, action } = data;\nconst oldRest = globalDate.oldRest;\nif (action == true) {\n    let rightRest = null;\n    if (add &gt; 0) {\n        rightRest = oldRest - 1 + 15;\n    } else {\n        rightRest = oldRest - 1;\n    }\n    expect(rest).to.be.equal(rightRest);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d4d7639-f9b3-4c1e-aa1d-4ffec36db6f8&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;balance is not change&quot;,&quot;fullTitle&quot;:&quot;Test FSEW balance is not change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { rest, balance, action } = data;\nlet { oldBalance } = globalDate;\nif (action) {\n    if (rest &gt; 0) {\n        console.log(balance + \&quot; balance\&quot; + oldBalance + \&quot; oldBalance\&quot;);\n        expect(balance).to.be.equal(oldBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d5a676c-b2fd-4b8d-b9aa-e43c7dd2771e&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null) {\n        winLinesWithoutNull.forEach((el) =&gt; {\n            console.log(el.id + \&quot;  id\&quot;);\n            const winPositions = el.positions;\n            console.log(winPositions);\n            console.log(el.amount + \&quot;   amount\&quot;);\n            const winSymbol = el.symbol;\n            winPositions.forEach((el) =&gt; {\n                const tempSymbols = newMatrix[el[0]][el[1]];\n                if (tempSymbols !== \&quot;2\&quot;) {\n                    expect(winSymbol).to.be.equal(tempSymbols);\n                } else {\n                    expect(\&quot;2\&quot;).to.be.equal(tempSymbols);\n                    console.log(&#x27;there is a wild in the pay line&#x27;);\n                }\n            });\n            console.log([winSymbol] + \&quot; is correct position\&quot;);\n        });\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16e14c8e-85f5-485b-bb1a-2a0ce275eafe&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct wining symbol position null in FS&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct wining symbol position null in FS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { newMatrix, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        console.log(winLinesNull);\n        const positionSymbols = winLinesNull.positions;\n        const symbol = 1;\n        positionSymbols.forEach((el) =&gt; {\n            const coordinate = el; // [0, 0] coordinate[0] coordinate[1]\n            const tempSymbols = newMatrix[coordinate[0]][coordinate[1]];\n            expect(symbol).to.be.equal(Number(tempSymbols));\n        });\n        console.log(\&quot;position of wining Scatter is corect\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c75cb46d-bc9e-43df-a38b-6fd3a477ff76&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual of winnings in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual of winnings in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, newMatrix, winLinesWithoutNull, funcResult, action } = data;\nif (action == true &amp;&amp; funcResult !== null) {\n    let bet = betLines(res);\n    winLinesWithoutNull.forEach((el) =&gt; {\n        const winPositions = el.positions;\n        const winSymbol = el.symbol;\n        const amount = el.amount;\n        function winRight() {\n            return PaytableCoef(winPositions, paytable, winSymbol) * bet;\n        }\n        let rightAmount = winRight();\n        expect(amount).to.be.equal(rightAmount);\n    });\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e5dc2ab-4a96-45bd-814e-ef9a271fe04a&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual Scatter in FS(without * 3)&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual Scatter in FS(without * 3)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { res, winLinesNull, isWinNull, funcResult, action } = data;\nif (action == true) {\n    if (funcResult !== null &amp;&amp; isWinNull == true) {\n        const bet = res.context.bet;\n        const symbol = 1;\n        const amount = winLinesNull.amount;\n        const winPositions = winLinesNull.positions;\n        console.log(winLinesNull);\n        const winRightNull = PaytableCoef(winPositions, paytable, symbol) * bet;\n        expect(amount).to.be.equal(winRightNull);\n        console.log(\&quot;scatter is accrualed correct\&quot; + amount + \&quot; amount\&quot; + winRightNull + \&quot;winRightNull\&quot;);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa13b322-d57a-4a60-b2f7-74a151f5942a&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct accrual fsWin&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct accrual fsWin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { fsWin, funcResult, allWinLines, action } = data;\nlet { oldFsWin } = globalDate;\nif (action == true) {\n    if (funcResult !== null) {\n        let sum = 0;\n        allWinLines.forEach((el) =&gt; {\n            let amount = el.amount;\n            return sum += amount;\n        });\n        console.log(fsWin + \&quot; fsWin \&quot; + oldFsWin + \&quot; + \&quot; + sum + \&quot; oldFsWin + sum\&quot;);\n        expect(fsWin).to.be.equal(oldFsWin + sum);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddcfbcad-5bfd-4ea6-87e6-de9c255dd4aa&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check correct add fsWin to balance&quot;,&quot;fullTitle&quot;:&quot;Test FSEW check correct add fsWin to balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { action } = data;\nif (action == true) {\n    const { add, rest, fsWin, balance } = data;\n    let { oldBalance } = globalDate;\n    if (rest == 0 &amp;&amp; add == 0) {\n        const rightBalance = oldBalance + fsWin;\n        console.log(\&quot;!!! balance \&quot; + balance);\n        console.log(\&quot;!!! rightBalance \&quot; + rightBalance);\n        console.log(\&quot;!!! fsWin \&quot; + fsWin);\n        expect(balance).to.equal(rightBalance);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c630647f-8f27-42f0-b2e7-b13e9c6b1b65&quot;,&quot;parentUUID&quot;:&quot;9d81d4f6-5eb3-47de-8737-0e9100d5d37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5055927-5d48-4208-85d3-e44ccb2b6fc4&quot;,&quot;f4c3f83a-450c-4a23-9cdf-1f709d22675b&quot;,&quot;2d4d7639-f9b3-4c1e-aa1d-4ffec36db6f8&quot;,&quot;2d5a676c-b2fd-4b8d-b9aa-e43c7dd2771e&quot;,&quot;16e14c8e-85f5-485b-bb1a-2a0ce275eafe&quot;,&quot;c75cb46d-bc9e-43df-a38b-6fd3a477ff76&quot;,&quot;4e5dc2ab-4a96-45bd-814e-ef9a271fe04a&quot;,&quot;aa13b322-d57a-4a60-b2f7-74a151f5942a&quot;,&quot;ddcfbcad-5bfd-4ea6-87e6-de9c255dd4aa&quot;,&quot;c630647f-8f27-42f0-b2e7-b13e9c6b1b65&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:30000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.1.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.0&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;mocha-chai-test-project&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/marinaratova/Desktop/JS/mocha-chai-test-project/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>